# Simple Express Server with PostgreSQL

This project is a proof of concept for inserting data into a PostgreSQL database using an Express.js server. The setup leverages Docker and Docker Compose to containerize both the Express server and the PostgreSQL database, making it easy to start up and configure.

> **Note**: This project is primarily generated by ChatGPT and serves as a rough demonstration. It does not follow any clean code principles or clean architecture patterns and is intended purely as a sandbox environment for data insertion techniques.

## Getting Started

### Prerequisites

Ensure you have the following installed:
- [Docker](https://www.docker.com/get-started)
- [Docker Compose](https://docs.docker.com/compose/install/)

### Project Structure

- **`docker-compose.yml`**: Defines the services, volumes, and environment variables for both the PostgreSQL and Express server containers.
- **`.env`**: Contains environment variables used by Docker Compose for database configuration.

### Setup

1. **Clone this repository** to your local machine.

2. **Start the services** with Docker Compose:

   ```bash
   docker-compose up
   ```

   This will initialize and run:
   - A PostgreSQL database container on port 5432
   - An Express server container on port 3000

   > **Wait for the following log messages to confirm service readiness**:
   >
   > - First, you may see the message: `Problem with dial: dial tcp *:5432: connect: connection refused. Sleeping 1s`.
   >
   > - This indicates that the dockertize is attempting to connect to PostgreSQL, which may take a few moments to be fully ready. Continue to wait until you see the message:
   >
   > - `Running on http://localhost:3000`, which confirms that the server is fully operational.

### Accessing the Services

- **Express server**: Accessible at `http://localhost:3000`
- **PostgreSQL database**: Accessible on `localhost:5432` (within containers, accessible at hostname `postgres`)

### File Overview

- **`docker-compose.yml`**:
  - Defines the `postgres` service, which uses the official `postgres` image.
  - Sets environment variables for database configuration based on values from `.env`.
  - Maps port 5432 for PostgreSQL and sets a 1GB memory limit for both services.
  - Defines the `app` service, which builds the Express server from the local directory, waits for the `postgres` container to be ready, and connects to it using environment variables.

### Important Notes

- **This project is for demonstration purposes only**. The code does not adhere to any clean architecture or production-ready standards.
- **Volume Mapping**: The `initdb` volume can be used to initialize the PostgreSQL database with any SQL scripts placed in `./initdb`.

### Stopping the Containers

To stop the services, run:

```bash
docker-compose down
```

This will remove the containers but keep the volumes and network configurations intact for future use.